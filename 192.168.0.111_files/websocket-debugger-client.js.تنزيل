var gdjs;(function(r){const t=new r.Logger("Debugger client (websocket)");class c extends r.AbstractDebuggerClient{constructor(n){super(n);this.hasLoggedError=!1;if(this._ws=null,typeof WebSocket=="undefined"){t.log("WebSocket is not defined, the debugger won't work.");return}const i=this;try{const e=n.getAdditionalOptions(),o=e&&e.websocketDebuggerServerAddress||"127.0.0.1",s=e&&e.websocketDebuggerServerPort||"3030";this._ws=new WebSocket("ws://"+o+":"+s+"/")}catch{try{this._ws=new WebSocket((location.protocol==="https:"?"wss://":"ws://")+location.hostname+":"+location.port+"/")}catch{try{this._ws=new WebSocket("ws://localhost:3030/")}catch{t.log("WebSocket could not initialize, debugger/hot-reload won't work.");return}}}this._ws.onopen=function(){t.info("Debugger connection open")},this._ws.onclose=function(){t.info("Debugger connection closed")},this._ws.onerror=function(o){t.warn("Debugger client error:",o)},this._ws.onmessage=function(o){let s=null;try{s=JSON.parse(o.data)}catch(a){t.info("Debugger received a badly formatted message:",a)}i.handleCommand(s)}}_sendMessage(n){if(!this._ws){this.hasLoggedError||(this.hasLoggedError=!0,t.warn("No connection to debugger opened to send a message."));return}this._ws.readyState===1&&this._ws.send(n)}}r.WebsocketDebuggerClient=c,r.DebuggerClient=c})(gdjs||(gdjs={}));
//# sourceMappingURL=websocket-debugger-client.js.map
